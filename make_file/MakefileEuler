SHELL := /bin/bash

SBML_INC_DIR=$(HOME)/usr/include
SBML_LIB_DIR=$(HOME)/usr/lib

BLITZ_INC_DIR=$(HOME)/usr/include
BLITZ_LIB_DIR=$(HOME)/usr/lib

BOOST_INC_DIR=$(BOOST_INCLUDEDIR)
BOOST_LIB_DIR=$(BOOST_LIBRARYDIR)

GSL_INC_DIR=$(HOME)/usr/include
GSL_LIB_DIR=$(HOME)/usr/lib


#--------------------
# Set up compilers:
#--------------------
CC = g++ -O3 -w -Wno-deprecated

#CPPFLAGS += -I$(SBML_INC_DIR) -I$(BLITZ_INC_DIR) -L$(BLITZ_LIB_DIR) -lblitz -I$(BOOST_INC_DIR) -I$(GSL_INC_DIR)
CPPFLAGS += -I$(SBML_INC_DIR) -I$(BLITZ_INC_DIR) -I$(BOOST_INC_DIR) -I$(GSL_INC_DIR)

CPPFLAGS += -std=c++11


ifeq "$(config)" "production"
CPPFLAGS += -DNDEBUG
CPPFLAGS += -D_FMMSILENT
endif

# Define Dimerization system
#CPPFLAGS += -D Dimerization
CPPFLAGS += -DLacZLacY

LIBS += -L$(SBML_LIB_DIR) -lsbml
LIBS += -L$(BLITZ_LIB_DIR) -lblitz -lexpat -lbz2 -lz
LIBS += -L$(GSL_LIB_DIR) -lgsl -lgslcblas -lm
LINS += -L$(BLITZ_LIB_DIR) -lblitz

LD=$(CC)
.DEFAULT_GOAL := ssm

########################################################################
# List of all programs to be compiled
########################################################################
SRCS = $(wildcard  ./source/RNGLib/*.cpp)  \
        $(wildcard ./source/Timer/*.cpp)  \
        $(wildcard ./source/Methods/*.cpp)  \
        $(wildcard ./source/Jacobians/*.cpp)  \
        ./source/SBMLReaderAndParser.cpp \
        ./source/Simulation.cpp \
        ./source/SSMReaction.cpp \
        ./source/StochasticSimulationMethods.cpp


# object files, auto generated from source files
OBJECTS=$(SRCS:.cpp=.o)

# compile C source files
ssm: $(OBJECTS)
	$(CC) $(LIBS)  $^ -o $@
	@echo done


%.o: %.cpp
	$(CC) $(CPPFLAGS) -c $^ -o $@


clean:
	rm -f *.o
	rm -f ssm
	rm -f ./source/Timer/*.o
	rm -f ./source/*.o
	rm -r ./source/Methods/*.o
	rm -r ./source/Jacobians/*.o
	rm -r ./source/RNGLib/*.o
